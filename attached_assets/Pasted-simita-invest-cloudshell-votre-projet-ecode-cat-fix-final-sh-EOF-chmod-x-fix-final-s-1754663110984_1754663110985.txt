simita_invest@cloudshell:~ (votre-projet-ecode)$ cat > fix-final.sh << 'EOF' && chmod +x fix-final.sh && ./fix-final.sh
#!/bin/bash
PROJECT_ID="votre-projet-ecode"
ZONE="europe-west1-b"

echo "🚀 DÉPLOIEMENT E-CODE PLATFORM CORRIGÉ"
echo "======================================"

gcloud config set project ${PROJECT_ID}
gcloud container clusters get-credentials e-code-production --zone=${ZONE}

# Nettoyer l'ancien déploiement échoué
kubectl delete deployment e-code-final -n e-code 2>/dev/null || true

# Créer app
mkdir -p app-fixed && cd app-fixed

cat > server.js << 'JS'
const express = require('express');
const app = express();
const PORT = 8080;

app.get('/', (req, res) => {
  res.send(`
<!DOCTYPE html>
<html>
<head>
  <title>E-Code Platform - e-code.ai</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
      color: white;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .container {
      max-width: 1200px;
      padding: 3rem;
EOF.. && rm -rf app-fixed{IP}/api/health"-n e-code -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
🚀 DÉPLOIEMENT E-CODE PLATFORM CORRIGÉ
======================================
Updated property [core/project].
Fetching cluster endpoint and auth data.
kubeconfig entry generated for e-code-production.
deployment.apps "e-code-final" deleted
[+] Building 0.5s (10/10) FINISHED                                                                        docker:default
 => [internal] load build definition from Dockerfile                                                                0.0s
 => => transferring dockerfile: 178B                                                                                0.0s
 => [internal] load metadata for docker.io/library/node:18-alpine                                                   0.3s
 => [internal] load .dockerignore                                                                                   0.0s
 => => transferring context: 2B                                                                                     0.0s
 => [1/5] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca  0.0s
 => [internal] load build context                                                                                   0.0s
 => => transferring context: 5.18kB                                                                                 0.0s
 => CACHED [2/5] WORKDIR /app                                                                                       0.0s
 => CACHED [3/5] COPY package.json ./                                                                               0.0s
 => CACHED [4/5] RUN npm install --production                                                                       0.0s
 => [5/5] COPY server.js ./                                                                                         0.0s
 => exporting to image                                                                                              0.0s
 => => exporting layers                                                                                             0.0s
 => => writing image sha256:48057195fa5653970294f1c06fd891886c312b77e8ce977dc617b50fe6cce3e3                        0.0s
 => => naming to gcr.io/votre-projet-ecode/e-code-fixed:latest                                                      0.0s
The push refers to repository [gcr.io/votre-projet-ecode/e-code-fixed]
264585a62fdf: Pushed 
d9c2d4f52c24: Layer already exists 
01de3ec7e6f8: Layer already exists 
5569d6364535: Layer already exists 
82140d9a70a7: Layer already exists 
f3b40b0cdb1c: Layer already exists 
0b1f26057bd0: Layer already exists 
08000c18d16d: Layer already exists 
latest: digest: sha256:849aa8502814a76979dd83505eec8ea7b061c7823df01eb0be2e5163967a228c size: 1990
deployment.apps/e-code-final created

✅ DÉPLOIEMENT CORRIGÉ TERMINÉ!
===============================
🌐 Application: http://35.241.201.16
📌 Domaine: https://e-code.ai
📊 Monitoring: http://34.52.255.38

Test: curl http://35.241.201.16/api/health